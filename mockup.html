<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Marketplace Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Plus Jakarta Sans', sans-serif;
    }
    .sidebar-transition {
      transition: transform 0.3s ease, width 0.3s ease;
    }
    .card-hover {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    .btn-primary {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    }
    .status-draft { background: #f3f4f6; color: #6b7280; }
    .status-pending { background: #fef3c7; color: #d97706; }
    .status-approved { background: #d1fae5; color: #059669; }
    .status-rejected { background: #fee2e2; color: #dc2626; }
    .role-admin { background: #ddd6fe; color: #7c3aed; }
    .role-editor { background: #dbeafe; color: #2563eb; }
    .role-approver { background: #fce7f3; color: #db2777; }
    .role-viewer { background: #f3f4f6; color: #6b7280; }
    .nav-active {
      background: rgba(59, 130, 246, 0.15);
      border-left: 3px solid #3b82f6;
    }
    .input-focus:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    .toast-enter {
      animation: slideIn 0.3s ease;
    }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gray-50">
  <div id="app" class="h-full overflow-auto"><!-- Login Screen -->
   <div id="login-screen" class="hidden h-full flex items-center justify-center p-4" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);">
    <div class="w-full max-w-md">
     <div class="bg-white rounded-2xl shadow-2xl p-8">
      <div class="text-center mb-8">
       <div class="w-16 h-16 mx-auto mb-4 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
       </div>
       <h1 id="login-company-name" class="text-2xl font-bold text-gray-900">BaisoftMarketHub</h1>
       <p class="text-gray-500 mt-2">Sign in to your account</p>
      </div>
      <form id="login-form" class="space-y-5">
       <div><label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label> <input type="email" id="email" class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all" placeholder="you@example.com" value="admin@markethub.com">
       </div>
       <div><label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label> <input type="password" id="password" class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all" placeholder="••••••••" value="password">
       </div>
       <div class="flex items-center justify-between"><label class="flex items-center gap-2 cursor-pointer"> <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"> <span class="text-sm text-gray-600">Remember me</span> </label> <a href="#" class="text-sm text-blue-600 hover:text-blue-700 font-medium">Forgot password?</a>
       </div><button type="submit" class="w-full py-3 px-4 btn-primary text-white font-semibold rounded-xl shadow-lg shadow-blue-500/30 hover:shadow-blue-500/40 transition-all"> Sign In </button>
      </form>
      <div class="mt-6 pt-6 border-t border-gray-100">
       <p class="text-center text-sm text-gray-500 mb-4">Demo: Select a role to preview</p>
       <div class="grid grid-cols-2 gap-2"><button onclick="loginAsRole('admin')" class="px-3 py-2 text-sm font-medium rounded-lg role-admin hover:opacity-80 transition-opacity">Admin</button> <button onclick="loginAsRole('editor')" class="px-3 py-2 text-sm font-medium rounded-lg role-editor hover:opacity-80 transition-opacity">Editor</button> <button onclick="loginAsRole('approver')" class="px-3 py-2 text-sm font-medium rounded-lg role-approver hover:opacity-80 transition-opacity">Approver</button> <button onclick="loginAsRole('viewer')" class="px-3 py-2 text-sm font-medium rounded-lg role-viewer hover:opacity-80 transition-opacity">Viewer</button>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Main Dashboard -->
   <div id="dashboard-screen" class="h-full flex"><!-- Mobile Overlay -->
    <div id="sidebar-overlay" class="hidden fixed inset-0 bg-black/50 z-40 lg:hidden" onclick="toggleSidebar()"></div><!-- Sidebar -->
    <aside id="sidebar" class="fixed lg:relative z-50 h-full w-64 sidebar-transition -translate-x-full lg:translate-x-0" style="background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);">
     <div class="flex flex-col h-full"><!-- Logo -->
      <div class="p-5 border-b border-white/10">
       <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
         <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
         </svg>
        </div><span id="sidebar-company-name" class="text-white font-bold text-lg">MarketHub</span>
       </div>
      </div><!-- Navigation -->
      <nav class="flex-1 p-4 space-y-1"><a href="#" onclick="navigateTo('dashboard')" data-nav="dashboard" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg><span>Dashboard</span> </a> <a href="#" onclick="navigateTo('products')" data-nav="products" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg><span>Products</span> </a> <a href="#" onclick="navigateTo('create')" data-nav="create" data-role="admin,editor" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
        </svg><span>Create Product</span> </a> <a href="#" onclick="navigateTo('approvals')" data-nav="approvals" data-role="admin,approver" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg><span>Approvals</span> <span id="pending-badge" class="ml-auto bg-yellow-500 text-white text-xs font-bold px-2 py-0.5 rounded-full">3</span> </a> <a href="#" onclick="navigateTo('users')" data-nav="users" data-role="admin" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-white/70 hover:bg-white/10 hover:text-white transition-all">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg><span>Users &amp; Roles</span> </a>
      </nav><!-- User Info -->
      <div class="p-4 border-t border-white/10">
       <div class="flex items-center gap-3 p-3 rounded-xl bg-white/5">
        <div id="user-avatar" class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold">
         A
        </div>
        <div class="flex-1 min-w-0">
         <p id="user-name" class="text-white font-medium text-sm truncate">Admin User</p><span id="user-role-badge" class="inline-block px-2 py-0.5 text-xs font-medium rounded-full role-admin">Admin</span>
        </div>
       </div>
      </div>
     </div>
    </aside><!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 h-full overflow-auto"><!-- Header -->
     <header class="sticky top-0 z-30 bg-white/80 backdrop-blur-lg border-b border-gray-200">
      <div class="flex items-center justify-between px-4 lg:px-8 py-4">
       <div class="flex items-center gap-4"><button onclick="toggleSidebar()" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
         <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
         </svg></button>
        <div>
         <h1 id="page-title" class="text-xl lg:text-2xl font-bold text-gray-900">Dashboard</h1>
         <p id="page-subtitle" class="text-sm text-gray-500 hidden lg:block">Welcome back, Admin User</p>
        </div>
       </div>
       <div class="flex items-center gap-3"><button class="p-2 rounded-lg hover:bg-gray-100 transition-colors relative">
         <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
         </svg><span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span> </button> <button onclick="logout()" class="hidden sm:flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
         </svg> Logout </button>
       </div>
      </div>
     </header><!-- Page Content -->
     <div class="flex-1 p-4 lg:p-8"><!-- Dashboard View -->
      <div id="view-dashboard" class="view space-y-6"><!-- Stats Grid -->
       <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 card-hover">
         <div class="flex items-center justify-between mb-3">
          <div class="w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
           </svg>
          </div><span class="text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded-full">+12%</span>
         </div>
         <p class="text-2xl font-bold text-gray-900">156</p>
         <p class="text-sm text-gray-500">Total Products</p>
        </div>
        <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 card-hover">
         <div class="flex items-center justify-between mb-3">
          <div class="w-10 h-10 rounded-xl bg-green-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
           </svg>
          </div><span class="text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded-full">+8%</span>
         </div>
         <p class="text-2xl font-bold text-gray-900">124</p>
         <p class="text-sm text-gray-500">Approved</p>
        </div>
        <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 card-hover">
         <div class="flex items-center justify-between mb-3">
          <div class="w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
           </svg>
          </div><span class="text-xs font-medium text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full">3 new</span>
         </div>
         <p class="text-2xl font-bold text-gray-900">18</p>
         <p class="text-sm text-gray-500">Pending</p>
        </div>
        <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 card-hover">
         <div class="flex items-center justify-between mb-3">
          <div class="w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
           </svg>
          </div>
         </div>
         <p class="text-2xl font-bold text-gray-900">14</p>
         <p class="text-sm text-gray-500">Drafts</p>
        </div>
       </div><!-- Recent Activity -->
       <div class="bg-white rounded-2xl shadow-sm border border-gray-100">
        <div class="p-5 border-b border-gray-100">
         <h2 class="font-semibold text-gray-900">Recent Activity</h2>
        </div>
        <div class="divide-y divide-gray-100">
         <div class="p-5 flex items-center gap-4">
          <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
           </svg>
          </div>
          <div class="flex-1 min-w-0">
           <p class="font-medium text-gray-900">Wireless Headphones Pro approved</p>
           <p class="text-sm text-gray-500">Approved by Sarah Miller</p>
          </div><span class="text-sm text-gray-400">2 min ago</span>
         </div>
         <div class="p-5 flex items-center gap-4">
          <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
           </svg>
          </div>
          <div class="flex-1 min-w-0">
           <p class="font-medium text-gray-900">New product created: Smart Watch X</p>
           <p class="text-sm text-gray-500">Created by John Doe</p>
          </div><span class="text-sm text-gray-400">15 min ago</span>
         </div>
         <div class="p-5 flex items-center gap-4">
          <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center">
           <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
           </svg>
          </div>
          <div class="flex-1 min-w-0">
           <p class="font-medium text-gray-900">USB-C Hub submitted for approval</p>
           <p class="text-sm text-gray-500">Submitted by Alex Chen</p>
          </div><span class="text-sm text-gray-400">1 hour ago</span>
         </div>
        </div>
       </div>
      </div><!-- Products View -->
      <div id="view-products" class="view hidden space-y-6"><!-- Filters -->
       <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between">
        <div class="flex flex-wrap gap-2"><button onclick="filterProducts('all')" data-filter="all" class="filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-900 text-white transition-colors">All</button> <button onclick="filterProducts('approved')" data-filter="approved" class="filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors">Approved</button> <button onclick="filterProducts('pending')" data-filter="pending" class="filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors">Pending</button> <button onclick="filterProducts('draft')" data-filter="draft" class="filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors">Draft</button>
        </div>
        <div class="relative w-full sm:w-auto">
         <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
         </svg><input type="text" placeholder="Search products..." class="w-full sm:w-64 pl-10 pr-4 py-2 rounded-xl border border-gray-200 input-focus transition-all">
        </div>
       </div><!-- Product Cards Grid -->
       <div id="products-grid" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"><!-- Products will be rendered here -->
       </div>
      </div><!-- Create Product View -->
      <div id="view-create" class="view hidden">
       <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
         <div class="p-6 border-b border-gray-100">
          <h2 id="form-title" class="text-lg font-semibold text-gray-900">Create New Product</h2>
          <p class="text-sm text-gray-500 mt-1">Fill in the details to create a new product listing</p>
         </div>
         <form id="product-form" class="p-6 space-y-6">
          <div><label class="block text-sm font-medium text-gray-700 mb-2">Product Name <span class="text-red-500">*</span></label> <input type="text" id="product-name" required class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all" placeholder="Enter product name">
           <p id="name-error" class="hidden mt-2 text-sm text-red-500">Product name is required</p>
          </div>
          <div><label class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="product-desc" rows="4" class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all resize-none" placeholder="Describe your product..."></textarea>
          </div>
          <div class="grid grid-cols-2 gap-4">
           <div><label class="block text-sm font-medium text-gray-700 mb-2">Price <span class="text-red-500">*</span></label>
            <div class="relative"><span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">$</span> <input type="number" id="product-price" required min="0" step="0.01" class="w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 input-focus transition-all" placeholder="0.00">
            </div>
            <p id="price-error" class="hidden mt-2 text-sm text-red-500">Valid price is required</p>
           </div>
           <div><label class="block text-sm font-medium text-gray-700 mb-2">Category</label> <select class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all bg-white"> <option>Electronics</option> <option>Accessories</option> <option>Software</option> <option>Services</option> </select>
           </div>
          </div>
          <div class="flex flex-col sm:flex-row gap-3 pt-4"><button type="button" onclick="saveAsDraft()" class="flex-1 px-6 py-3 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all"> Save as Draft </button> <button type="submit" class="flex-1 px-6 py-3 btn-primary text-white font-medium rounded-xl shadow-lg shadow-blue-500/25 transition-all"> Submit for Approval </button>
          </div>
         </form>
        </div>
       </div>
      </div><!-- Approvals View -->
      <div id="view-approvals" class="view hidden space-y-4">
       <div id="approvals-list" class="space-y-4"><!-- Approval cards will be rendered here -->
       </div>
      </div><!-- Users View -->
      <div id="view-users" class="view hidden space-y-6">
       <div class="flex justify-between items-center">
        <p class="text-gray-500">Manage team members and their permissions</p><button class="px-4 py-2 btn-primary text-white font-medium rounded-xl text-sm shadow-lg shadow-blue-500/25"> + Add User </button>
       </div>
       <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
        <div class="divide-y divide-gray-100">
         <div class="p-5 flex flex-col sm:flex-row sm:items-center gap-4">
          <div class="flex items-center gap-4 flex-1">
           <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-semibold">
            A
           </div>
           <div>
            <p class="font-medium text-gray-900">Admin User</p>
            <p class="text-sm text-gray-500">admin@markethub.com</p>
           </div>
          </div>
          <div class="flex items-center gap-3"><span class="px-3 py-1 text-sm font-medium rounded-full role-admin">Admin</span> <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg></button>
          </div>
         </div>
         <div class="p-5 flex flex-col sm:flex-row sm:items-center gap-4">
          <div class="flex items-center gap-4 flex-1">
           <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold">
            J
           </div>
           <div>
            <p class="font-medium text-gray-900">John Editor</p>
            <p class="text-sm text-gray-500">john@markethub.com</p>
           </div>
          </div>
          <div class="flex items-center gap-3"><span class="px-3 py-1 text-sm font-medium rounded-full role-editor">Editor</span> <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg></button>
          </div>
         </div>
         <div class="p-5 flex flex-col sm:flex-row sm:items-center gap-4">
          <div class="flex items-center gap-4 flex-1">
           <div class="w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-pink-600 flex items-center justify-center text-white font-semibold">
            S
           </div>
           <div>
            <p class="font-medium text-gray-900">Sarah Approver</p>
            <p class="text-sm text-gray-500">sarah@markethub.com</p>
           </div>
          </div>
          <div class="flex items-center gap-3"><span class="px-3 py-1 text-sm font-medium rounded-full role-approver">Approver</span> <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg></button>
          </div>
         </div>
         <div class="p-5 flex flex-col sm:flex-row sm:items-center gap-4">
          <div class="flex items-center gap-4 flex-1">
           <div class="w-12 h-12 rounded-full bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center text-white font-semibold">
            V
           </div>
           <div>
            <p class="font-medium text-gray-900">View Only</p>
            <p class="text-sm text-gray-500">viewer@markethub.com</p>
           </div>
          </div>
          <div class="flex items-center gap-3"><span class="px-3 py-1 text-sm font-medium rounded-full role-viewer">Viewer</span> <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
            </svg></button>
          </div>
         </div>
        </div>
       </div>
      </div><!-- Public Catalog View -->
      <div id="view-catalog" class="view hidden">
       <div class="text-center mb-8">
        <h2 id="catalog-title" class="text-2xl font-bold text-gray-900">Product Catalog</h2>
        <p class="text-gray-500 mt-2">Browse our collection of approved products</p>
       </div>
       <div id="catalog-grid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"><!-- Public products will be rendered here -->
       </div>
      </div>
     </div>
    </main>
   </div><!-- Toast Container -->
   <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div><!-- Edit Product Modal -->
   <div id="edit-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/50" onclick="closeEditModal()"></div>
    <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90%] overflow-auto">
     <div class="p-6 border-b border-gray-100 flex items-center justify-between">
      <h3 class="text-lg font-semibold text-gray-900">Edit Product</h3><button onclick="closeEditModal()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
       <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
       </svg></button>
     </div>
     <form id="edit-form" class="p-6 space-y-5"><input type="hidden" id="edit-id">
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Product Name</label> <input type="text" id="edit-name" class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all">
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="edit-desc" rows="3" class="w-full px-4 py-3 rounded-xl border border-gray-200 input-focus transition-all resize-none"></textarea>
      </div>
      <div><label class="block text-sm font-medium text-gray-700 mb-2">Price</label>
       <div class="relative"><span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">$</span> <input type="number" id="edit-price" min="0" step="0.01" class="w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 input-focus transition-all">
       </div>
      </div>
      <div class="flex gap-3 pt-2"><button type="button" onclick="closeEditModal()" class="flex-1 px-4 py-3 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all">Cancel</button> <button type="submit" class="flex-1 px-4 py-3 btn-primary text-white font-medium rounded-xl shadow-lg shadow-blue-500/25 transition-all">Save Changes</button>
      </div>
     </form>
    </div>
   </div><!-- Confirmation Modal -->
   <div id="confirm-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/50" onclick="closeConfirmModal()"></div>
    <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6">
     <div class="text-center">
      <div id="confirm-icon" class="w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center">
       <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
       </svg>
      </div>
      <h3 id="confirm-title" class="text-lg font-semibold text-gray-900 mb-2">Approve Product?</h3>
      <p id="confirm-message" class="text-gray-500 mb-6">This product will become visible to all users.</p>
      <div class="flex gap-3"><button onclick="closeConfirmModal()" class="flex-1 px-4 py-3 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all">Cancel</button> <button id="confirm-action" class="flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-xl transition-all">Approve</button>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      company_name: 'MarketHub',
      dashboard_title: 'Dashboard',
      welcome_message: 'Welcome back',
      empty_state_text: 'No products yet',
      background_color: '#f9fafb',
      surface_color: '#ffffff',
      text_color: '#111827',
      primary_action_color: '#3b82f6',
      secondary_action_color: '#6b7280'
    };

    let config = { ...defaultConfig };
    
    // App State
    let currentUser = null;
    let currentView = 'dashboard';
    let currentFilter = 'all';
    let editingProductId = null;
    let confirmCallback = null;
    
    // Sample Products Data
    const products = [
      { id: 1, name: 'Wireless Headphones Pro', description: 'Premium noise-canceling wireless headphones with 40-hour battery life.', price: 299.99, status: 'approved', createdBy: 'John Editor' },
      { id: 2, name: 'Smart Watch X', description: 'Advanced fitness tracking and health monitoring smartwatch.', price: 449.99, status: 'pending', createdBy: 'Alex Chen' },
      { id: 3, name: 'USB-C Hub Ultra', description: '10-in-1 USB-C hub with 4K HDMI and fast charging.', price: 79.99, status: 'pending', createdBy: 'John Editor' },
      { id: 4, name: 'Mechanical Keyboard', description: 'RGB mechanical keyboard with hot-swappable switches.', price: 149.99, status: 'draft', createdBy: 'Alex Chen' },
      { id: 5, name: 'Portable SSD 1TB', description: 'Ultra-fast portable SSD with USB 3.2 Gen 2.', price: 129.99, status: 'approved', createdBy: 'John Editor' },
      { id: 6, name: 'Webcam HD Pro', description: '4K webcam with auto-focus and noise-canceling mic.', price: 199.99, status: 'pending', createdBy: 'Sarah Approver' },
      { id: 7, name: 'Monitor Stand', description: 'Ergonomic aluminum monitor stand with USB ports.', price: 89.99, status: 'approved', createdBy: 'John Editor' },
      { id: 8, name: 'Desk Mat XXL', description: 'Premium leather desk mat with cable organizer.', price: 49.99, status: 'draft', createdBy: 'Alex Chen' },
    ];

    // Role configurations
    const roleConfig = {
      admin: { name: 'Admin User', avatar: 'A', permissions: ['view', 'create', 'edit', 'approve', 'manage_users'], color: 'purple' },
      editor: { name: 'John Editor', avatar: 'J', permissions: ['view', 'create', 'edit'], color: 'blue' },
      approver: { name: 'Sarah Approver', avatar: 'S', permissions: ['view', 'approve'], color: 'pink' },
      viewer: { name: 'View Only', avatar: 'V', permissions: ['view'], color: 'gray' }
    };

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...defaultConfig, ...newConfig };
          updateUI();
        },
        mapToCapabilities: (cfg) => ({
          recolorables: [
            { get: () => cfg.background_color || defaultConfig.background_color, set: (v) => window.elementSdk.setConfig({ background_color: v }) },
            { get: () => cfg.surface_color || defaultConfig.surface_color, set: (v) => window.elementSdk.setConfig({ surface_color: v }) },
            { get: () => cfg.text_color || defaultConfig.text_color, set: (v) => window.elementSdk.setConfig({ text_color: v }) },
            { get: () => cfg.primary_action_color || defaultConfig.primary_action_color, set: (v) => window.elementSdk.setConfig({ primary_action_color: v }) },
            { get: () => cfg.secondary_action_color || defaultConfig.secondary_action_color, set: (v) => window.elementSdk.setConfig({ secondary_action_color: v }) }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ['company_name', cfg.company_name || defaultConfig.company_name],
          ['dashboard_title', cfg.dashboard_title || defaultConfig.dashboard_title],
          ['welcome_message', cfg.welcome_message || defaultConfig.welcome_message],
          ['empty_state_text', cfg.empty_state_text || defaultConfig.empty_state_text]
        ])
      });
    }

    function updateUI() {
      // Update company names
      const loginCompany = document.getElementById('login-company-name');
      const sidebarCompany = document.getElementById('sidebar-company-name');
      if (loginCompany) loginCompany.textContent = config.company_name || defaultConfig.company_name;
      if (sidebarCompany) sidebarCompany.textContent = config.company_name || defaultConfig.company_name;
      
      // Update colors
      document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
      
      // Update welcome message in subtitle
      const subtitle = document.getElementById('page-subtitle');
      if (subtitle && currentUser) {
        subtitle.textContent = `${config.welcome_message || defaultConfig.welcome_message}, ${currentUser.name}`;
      }
    }

    // Login Functions
    function loginAsRole(role) {
      currentUser = { role, ...roleConfig[role] };
      showDashboard();
    }

    function logout() {
      currentUser = null;
      document.getElementById('login-screen').classList.remove('hidden');
      document.getElementById('dashboard-screen').classList.add('hidden');
    }

    function showDashboard() {
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('dashboard-screen').classList.remove('hidden');
      updateUserInfo();
      updateNavigation();
      navigateTo('dashboard');
    }

    function updateUserInfo() {
      document.getElementById('user-avatar').textContent = currentUser.avatar;
      document.getElementById('user-name').textContent = currentUser.name;
      const badge = document.getElementById('user-role-badge');
      badge.textContent = currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1);
      badge.className = `inline-block px-2 py-0.5 text-xs font-medium rounded-full role-${currentUser.role}`;
      
      const subtitle = document.getElementById('page-subtitle');
      subtitle.textContent = `${config.welcome_message || defaultConfig.welcome_message}, ${currentUser.name}`;
    }

    function updateNavigation() {
      document.querySelectorAll('.nav-item').forEach(item => {
        const requiredRoles = item.dataset.role;
        if (requiredRoles) {
          const roles = requiredRoles.split(',');
          item.style.display = roles.includes(currentUser.role) ? 'flex' : 'none';
        }
      });
      
      // Update pending badge count
      const pendingCount = products.filter(p => p.status === 'pending').length;
      document.getElementById('pending-badge').textContent = pendingCount;
    }

    // Navigation
    function navigateTo(view) {
      currentView = view;
      
      // Hide all views
      document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
      
      // Show selected view
      const viewElement = document.getElementById(`view-${view}`);
      if (viewElement) viewElement.classList.remove('hidden');
      
      // Update nav active state
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('nav-active');
        if (item.dataset.nav === view) {
          item.classList.add('nav-active');
        }
      });
      
      // Update page title
      const titles = {
        dashboard: config.dashboard_title || defaultConfig.dashboard_title,
        products: 'Products',
        create: 'Create Product',
        approvals: 'Product Approvals',
        users: 'Users & Roles',
        catalog: 'Product Catalog'
      };
      document.getElementById('page-title').textContent = titles[view] || 'Dashboard';
      
      // Render view content
      if (view === 'products') renderProducts();
      if (view === 'approvals') renderApprovals();
      if (view === 'catalog') renderCatalog();
      
      // Close sidebar on mobile
      if (window.innerWidth < 1024) {
        closeSidebar();
      }
    }

    // Sidebar Toggle
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      sidebar.classList.toggle('-translate-x-full');
      overlay.classList.toggle('hidden');
    }

    function closeSidebar() {
      document.getElementById('sidebar').classList.add('-translate-x-full');
      document.getElementById('sidebar-overlay').classList.add('hidden');
    }

    // Product Rendering
    function renderProducts() {
      const grid = document.getElementById('products-grid');
      let filtered = [...products];
      
      if (currentFilter !== 'all') {
        filtered = products.filter(p => p.status === currentFilter);
      }
      
      if (filtered.length === 0) {
        grid.innerHTML = `
          <div class="col-span-full text-center py-16">
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center">
              <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
              </svg>
            </div>
            <p class="text-gray-500 text-lg">${config.empty_state_text || defaultConfig.empty_state_text}</p>
            <p class="text-gray-400 text-sm mt-1">Create your first product to get started</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = filtered.map(product => `
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden card-hover">
          <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-50 flex items-center justify-center">
            <svg class="w-16 h-16 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
            </svg>
          </div>
          <div class="p-5">
            <div class="flex items-start justify-between mb-3">
              <h3 class="font-semibold text-gray-900 line-clamp-1">${product.name}</h3>
              <span class="px-2.5 py-1 text-xs font-medium rounded-full status-${product.status}">${product.status.charAt(0).toUpperCase() + product.status.slice(1)}</span>
            </div>
            <p class="text-gray-500 text-sm mb-4 line-clamp-2">${product.description}</p>
            <div class="flex items-center justify-between">
              <span class="text-lg font-bold text-gray-900">$${product.price.toFixed(2)}</span>
              <div class="flex gap-2">
                ${getProductActions(product)}
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    function getProductActions(product) {
      const actions = [];
      const canEdit = currentUser.permissions.includes('edit') && product.status !== 'approved';
      const canApprove = currentUser.permissions.includes('approve') && product.status === 'pending';
      const canSubmit = currentUser.permissions.includes('edit') && product.status === 'draft';
      
      if (canEdit) {
        actions.push(`<button onclick="openEditModal(${product.id})" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Edit">
          <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
          </svg>
        </button>`);
      }
      
      if (canSubmit) {
        actions.push(`<button onclick="submitForApproval(${product.id})" class="px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">Submit</button>`);
      }
      
      if (product.status === 'approved') {
        actions.push(`<button disabled class="p-2 opacity-50 cursor-not-allowed" title="Cannot edit approved products">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
          </svg>
        </button>`);
      }
      
      return actions.join('');
    }

    // Approvals Rendering
    function renderApprovals() {
      const list = document.getElementById('approvals-list');
      const pending = products.filter(p => p.status === 'pending');
      
      if (pending.length === 0) {
        list.innerHTML = `
          <div class="text-center py-16 bg-white rounded-2xl border border-gray-100">
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center">
              <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <p class="text-gray-900 text-lg font-medium">All caught up!</p>
            <p class="text-gray-500 text-sm mt-1">No products pending approval</p>
          </div>
        `;
        return;
      }
      
      list.innerHTML = pending.map(product => `
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5">
          <div class="flex flex-col lg:flex-row lg:items-center gap-4">
            <div class="w-20 h-20 rounded-xl bg-gradient-to-br from-gray-100 to-gray-50 flex items-center justify-center flex-shrink-0">
              <svg class="w-10 h-10 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
              </svg>
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="font-semibold text-gray-900">${product.name}</h3>
                <span class="px-2 py-0.5 text-xs font-medium rounded-full status-pending">Pending</span>
              </div>
              <p class="text-gray-500 text-sm mb-2 line-clamp-2">${product.description}</p>
              <div class="flex items-center gap-4 text-sm text-gray-400">
                <span>$${product.price.toFixed(2)}</span>
                <span>•</span>
                <span>Submitted by ${product.createdBy}</span>
              </div>
            </div>
            <div class="flex gap-2 flex-shrink-0">
              <button onclick="showRejectConfirm(${product.id})" class="px-4 py-2 border border-red-200 text-red-600 font-medium rounded-xl hover:bg-red-50 transition-all">
                Reject
              </button>
              <button onclick="showApproveConfirm(${product.id})" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-xl transition-all">
                Approve
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Public Catalog
    function renderCatalog() {
      const grid = document.getElementById('catalog-grid');
      const approved = products.filter(p => p.status === 'approved');
      
      grid.innerHTML = approved.map(product => `
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden card-hover">
          <div class="aspect-video bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center">
            <svg class="w-16 h-16 text-blue-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
            </svg>
          </div>
          <div class="p-5">
            <h3 class="font-semibold text-gray-900 mb-2">${product.name}</h3>
            <p class="text-gray-500 text-sm mb-4 line-clamp-2">${product.description}</p>
            <div class="flex items-center justify-between">
              <span class="text-xl font-bold text-gray-900">$${product.price.toFixed(2)}</span>
              <button class="px-4 py-2 btn-primary text-white font-medium rounded-xl text-sm shadow-lg shadow-blue-500/25">
                View Details
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Filter Products
    function filterProducts(filter) {
      currentFilter = filter;
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.dataset.filter === filter) {
          btn.className = 'filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-900 text-white transition-colors';
        } else {
          btn.className = 'filter-btn px-4 py-2 text-sm font-medium rounded-xl bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors';
        }
      });
      renderProducts();
    }

    // Edit Modal
    function openEditModal(id) {
      const product = products.find(p => p.id === id);
      if (!product) return;
      
      editingProductId = id;
      document.getElementById('edit-id').value = id;
      document.getElementById('edit-name').value = product.name;
      document.getElementById('edit-desc').value = product.description;
      document.getElementById('edit-price').value = product.price;
      document.getElementById('edit-modal').classList.remove('hidden');
    }

    function closeEditModal() {
      document.getElementById('edit-modal').classList.add('hidden');
      editingProductId = null;
    }

    // Confirmation Modal
    function showApproveConfirm(id) {
      const product = products.find(p => p.id === id);
      document.getElementById('confirm-icon').innerHTML = `
        <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center">
          <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
      `;
      document.getElementById('confirm-title').textContent = 'Approve Product?';
      document.getElementById('confirm-message').textContent = `"${product.name}" will become visible to all users.`;
      const btn = document.getElementById('confirm-action');
      btn.textContent = 'Approve';
      btn.className = 'flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-xl transition-all';
      confirmCallback = () => approveProduct(id);
      document.getElementById('confirm-modal').classList.remove('hidden');
    }

    function showRejectConfirm(id) {
      const product = products.find(p => p.id === id);
      document.getElementById('confirm-icon').innerHTML = `
        <div class="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center">
          <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </div>
      `;
      document.getElementById('confirm-title').textContent = 'Reject Product?';
      document.getElementById('confirm-message').textContent = `"${product.name}" will be returned to draft status.`;
      const btn = document.getElementById('confirm-action');
      btn.textContent = 'Reject';
      btn.className = 'flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-xl transition-all';
      confirmCallback = () => rejectProduct(id);
      document.getElementById('confirm-modal').classList.remove('hidden');
    }

    function closeConfirmModal() {
      document.getElementById('confirm-modal').classList.add('hidden');
      confirmCallback = null;
    }

    // Product Actions
    function approveProduct(id) {
      const product = products.find(p => p.id === id);
      if (product) {
        product.status = 'approved';
        showToast(`"${product.name}" has been approved`, 'success');
        updateNavigation();
        renderApprovals();
      }
      closeConfirmModal();
    }

    function rejectProduct(id) {
      const product = products.find(p => p.id === id);
      if (product) {
        product.status = 'draft';
        showToast(`"${product.name}" has been rejected`, 'error');
        updateNavigation();
        renderApprovals();
      }
      closeConfirmModal();
    }

    function submitForApproval(id) {
      const product = products.find(p => p.id === id);
      if (product) {
        product.status = 'pending';
        showToast(`"${product.name}" submitted for approval`, 'info');
        updateNavigation();
        renderProducts();
      }
    }

    function saveAsDraft() {
      const name = document.getElementById('product-name').value;
      if (!name) {
        document.getElementById('name-error').classList.remove('hidden');
        return;
      }
      
      const newProduct = {
        id: products.length + 1,
        name,
        description: document.getElementById('product-desc').value,
        price: parseFloat(document.getElementById('product-price').value) || 0,
        status: 'draft',
        createdBy: currentUser.name
      };
      
      products.push(newProduct);
      showToast(`"${name}" saved as draft`, 'success');
      clearForm();
      navigateTo('products');
    }

    function clearForm() {
      document.getElementById('product-name').value = '';
      document.getElementById('product-desc').value = '';
      document.getElementById('product-price').value = '';
      document.getElementById('name-error').classList.add('hidden');
      document.getElementById('price-error').classList.add('hidden');
    }

    // Toast Notifications
    function showToast(message, type = 'info') {
      const container = document.getElementById('toast-container');
      const colors = {
        success: 'bg-green-600',
        error: 'bg-red-600',
        info: 'bg-blue-600',
        warning: 'bg-yellow-500'
      };
      
      const toast = document.createElement('div');
      toast.className = `${colors[type]} text-white px-5 py-3 rounded-xl shadow-lg toast-enter flex items-center gap-3`;
      toast.innerHTML = `
        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          ${type === 'success' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>' : ''}
          ${type === 'error' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>' : ''}
          ${type === 'info' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>' : ''}
          ${type === 'warning' ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>' : ''}
        </svg>
        <span class="font-medium">${message}</span>
      `;
      
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100%)';
        toast.style.transition = 'all 0.3s ease';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Form Handlers
    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      loginAsRole('admin');
    });

    document.getElementById('product-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const name = document.getElementById('product-name').value;
      const price = document.getElementById('product-price').value;
      
      let valid = true;
      
      if (!name) {
        document.getElementById('name-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('name-error').classList.add('hidden');
      }
      
      if (!price || parseFloat(price) <= 0) {
        document.getElementById('price-error').classList.remove('hidden');
        valid = false;
      } else {
        document.getElementById('price-error').classList.add('hidden');
      }
      
      if (!valid) return;
      
      const newProduct = {
        id: products.length + 1,
        name,
        description: document.getElementById('product-desc').value,
        price: parseFloat(price),
        status: 'pending',
        createdBy: currentUser.name
      };
      
      products.push(newProduct);
      showToast(`"${name}" submitted for approval`, 'success');
      clearForm();
      updateNavigation();
      navigateTo('products');
    });

    document.getElementById('edit-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const product = products.find(p => p.id === editingProductId);
      if (product) {
        product.name = document.getElementById('edit-name').value;
        product.description = document.getElementById('edit-desc').value;
        product.price = parseFloat(document.getElementById('edit-price').value);
        showToast(`"${product.name}" updated successfully`, 'success');
        renderProducts();
      }
      closeEditModal();
    });

    document.getElementById('confirm-action').addEventListener('click', () => {
      if (confirmCallback) confirmCallback();
    });

    // Initialize - show login screen
    document.getElementById('login-screen').classList.remove('hidden');
    updateUI();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bb10cb4b6da8a49',t:'MTc2NzkzMTQ1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>